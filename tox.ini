[tox]
envlist = py312,py313,lint,type
isolated_build = true
skip_missing_interpreters = true

[testenv]
description = Run tests with pytest
deps =
    pytest>=8.0.0
    pytest-cov>=4.1.0
    pytest-xdist>=3.5.0
commands =
    pytest {posargs:tests}

[testenv:lint]
description = Run linting with ruff
skip_install = true
deps =
    ruff>=0.3.0
commands =
    ruff check src tests
    ruff format --check src tests

[testenv:type]
description = Run type checking with mypy
deps =
    mypy>=1.8.0
commands =
    mypy src

[testenv:coverage]
description = Run tests with coverage report
deps =
    pytest>=8.0.0
    pytest-cov>=4.1.0
commands =
    pytest --cov=claude_code_setup --cov-report=term-missing --cov-report=xml tests

[gh-actions]
python =
    3.12: py312, lint, type
    3.13: py313
